<!DOCTYPE html>
<html lang="zxx">
<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Awaiken">
    <!-- Page Title -->
    <title>Inclub - Single Property HTML Template</title>
    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png">
    <!-- Google Fonts Css-->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&amp;display=swap"
          rel="stylesheet">
    <!-- Bootstrap Css -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <!-- SlickNav Css -->
    <link href="/css/slicknav.min.css" rel="stylesheet">
    <!-- Swiper Css -->
    <link rel="stylesheet" href="/css/swiper-bundle.min.css">
    <!-- Font Awesome Icon Css-->
    <link href="/css/all.min.css" rel="stylesheet" media="screen">
    <!-- Animated Css -->
    <link href="/css/animate.css" rel="stylesheet">
    <!-- Magnific Popup Core Css File -->
    <link rel="stylesheet" href="/css/magnific-popup.css">
    <!-- Mouse Cursor Css File -->
    <link rel="stylesheet" href="/css/mousecursor.css">
    <!-- Main Custom Css -->
    <link href="/css/custom.css" rel="stylesheet" media="screen">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- <style>
         .error{
             color: red;

         }
         .card {
             width: 20rem;
             border-radius: 12px;
             box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
             background: linear-gradient(135deg, #ababf8, #ffffff);
             color: #333;
         }
         .card-body {
             padding: 18px;
         }
         .card-title {
             text-align: center;
             font-size: 1.3rem;
             font-weight: bold;
             margin-bottom: 12px;
         }
         p {
             font-size: 1rem;
             margin-bottom: 6px;
         }
     </style>-->

    <%- include('../partials/headerfiles.html') %>

</head>
<body onload="ReadgaurdData('<%= type %>')">


<!-- Preloader Start -->
<div class="preloader">
    <div class="loading-container">
        <div class="loading"></div>
        <div id="loading-icon"><img src="/assets/img/logo/preloader.png" alt=""></div>
    </div>
</div>
<!-- Preloader End -->

<!-- Header Start -->
<%- include('../partials/adminheader') %>
<!-- Header End -->


<!-- Page Header Start -->
<div class="page-header parallaxie">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <!-- Page Header Box Start -->
                <div class="page-header-box">
                    <h1 class="text-anime-style-2" data-cursor="-opaque">Manage Admins</h1>

                </div>
                <!-- Page Header Box End -->
            </div>
        </div>
    </div>
</div>
<!-- Page Header End -->


<!--<div class="d-flex justify-content-center align-items-center vh-100" style="display: none;" id="addId">-->
<!--    <div class="col-md-6">-->
<!--        &lt;!&ndash; Section Title Start &ndash;&gt;-->
<!--        <div class="section-title text-center mt-2">-->
<!--            <h2 class="text-anime-style-2" data-cursor="-opaque">Add<span> Admin</span></h2>-->
<!--        </div>-->
<!--        &lt;!&ndash; Section Title End &ndash;&gt;-->
<!--        <div class="container mt-3 mb-5 p-4" style="background-color: #bfbff1; border-radius: 15px;">-->
<!--            <form id="regsform">-->
<!--                <div class="row">-->
<!--                    <div class="col-12">-->
<!--                        <div class="form-group mb-3">-->
<!--                            <label for="name" class="form-label">Full Name</label>-->
<!--                            <input type="text" class="form-control" id="name" placeholder="Enter full name" required>-->
<!--                        </div>-->

<!--                        <div class="form-group mb-3">-->
<!--                            <label for="email" class="form-label">Email</label>-->
<!--                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" required>-->
<!--                        </div>-->

<!--                        <div class="form-group mb-3">-->
<!--                            <label for="type" class="form-label">Type</label>-->
<!--                            <select class="form-select" id="type" name="type" required>-->
<!--                                <option selected disabled>Select Type</option>-->
<!--                                <option value="superadmin">Super Admin</option>-->
<!--                                <option value="admin">Admin</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="text-center">-->
<!--                    <button type="button" onclick="register()" class="btn btn-primary">Register</button>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->


<div class="" id="addId">
    <div class="">

        <!-- Section Title Start -->
        <div class="section-title text-center mt-2">

            <h2 class="text-anime-style-2" data-cursor="-opaque">Add<span> Admin</span></h2>
        </div>
        <!-- Section Title End -->
        <div class="container mt-3 mb-5 ">
            <form id="regsform">
                <div class="row">
                    <div>
                        <div class=" form-group col-md-12 ">
                            <label for="name" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="name" placeholder="Enter full name" required>
                        </div>

                        <div class="form-group col-md-12 mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email"
                                   required>
                        </div>


                        <div class="form-group col-md-12 mb-3">
                            <label for="type" class="form-label">Type</label>
                            <select class="form-select" id="type" name="type" required>
                                <option selected disabled>Select Type</option>
                                <option value="superadmin">Super Admin</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>

                    </div>


                </div>

                <button type="button" onclick="register()" class="btn btn-primary mb-3">Register</button>
            </form>
        </div>
    </div>
</div>
<!--card-->


<!-- Section Title Start -->
<div class="section-title text-center mt-2">

    <h2 class="text-anime-style-2" data-cursor="-opaque"><span>  Admins</span></h2>
</div>
<!-- Section Title End -->
<div class="container">
    <div class="row " id="cards">

    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<<!-- Jquery Library File -->
<script src="/js/jquery-3.7.1.min.js"></script>
<!-- Bootstrap js file -->
<script src="/js/bootstrap.min.js"></script>
<!-- Validator js file -->
<script src="/js/validator.min.js"></script>
<!-- SlickNav js file -->
<script src="/js/jquery.slicknav.js"></script>
<!-- Swiper js file -->
<script src="/js/swiper-bundle.min.js"></script>
<!-- Counter js file -->
<script src="/js/jquery.waypoints.min.js"></script>
<script src="/js/jquery.counterup.min.js"></script>
<!-- Magnific js file -->
<script src="/js/jquery.magnific-popup.min.js"></script>
<!-- SmoothScroll -->
<script src="/js/SmoothScroll.js"></script>
<!-- Parallax js -->
<script src="/js/parallaxie.js"></script>
<!-- MagicCursor js file -->
<!--<script src="/js/gsap.min.js"></script>-->
<!--<script src="/js/magiccursor.js"></script>-->
<!-- Text Effect js file -->
<script src="/js/SplitText.js"></script>
<script src="/js/ScrollTrigger.min.js"></script>
<!-- YTPlayer js File -->
<script src="/js/jquery.mb.YTPlayer.min.js"></script>
<!-- Wow js file -->
<script src="/js/wow.min.js"></script>
<!-- Main Custom js file -->
<script src="/js/function.js"></script>

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-validation/dist/jquery.validate.js"></script>
<script src="https://cdn.jsdelivr.net/gh/cosmogicofficial/quantumalert@latest/minfile/quantumalert.js"
        charset="utf-8"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

<script src="/email.js"></script>


<script>

    async function register() {
        if ($("#regsform").valid()) {

            let length = 8
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let pass = '';
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * chars.length);
                pass += chars[randomIndex];
            }


            var password = pass;
            var name = document.getElementById("name").value;
            var email = document.getElementById("email").value;
            var type = document.getElementById("type").value;

            // console.log(gender)

            var formData = new FormData();
            formData.append('name', name)
            formData.append('email', email)
            formData.append('password', password)
            formData.append('type', type)
            var res = await fetch("/admin/addadmin", {
                method: "POST",
                body: formData
            });

            res = await res.json();
            console.log(res);
            if (res.error) {
                Qual.errordb("Error", res.message);
            } else {
                Qual.successdb("Success", res.message);
                sendEmail(email, password, name)
                ReadgaurdData()
            }
        }

    }


    async function ReadgaurdData(type) {
        try {
            adminl(type)
            var res = await fetch('/admin/viewadmin');
            res = await res.json();
            var records = res.records;
            // console.log(records);
            var html = ``;
            for (var x of records) {

                html += `<tr>`
                html += `<td><div class=" col-md-4 mb-3" >

<div class="card">
    <div class="card-body">
        <h5 class="card-title">Admin Details</h5>
        <p><strong>Name:</strong> <span id="name">${x.name}</span></p>
        <p><strong>Email:</strong> <span id="gender">${x.email}</span></p>
        <p><strong>type:</strong> <span id="number">${x.type}</span></p>

                </div>
</div></div></td>`

                html += `</tr>`
            }
            document.getElementById('cards').innerHTML = html;
        } catch (e) {
            console.log(e.message);
        }
    }


    async function adminl(type) {
        console.log(type)

        if (type == 'superadmin') {
            document.getElementById("addId").style.display = 'block';
        }


    }


</script>


</body>
</html>